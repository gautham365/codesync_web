{"version":3,"sources":["Utils/Common.js","Utils/PrivateRoute.js","Utils/PublicRoute.js","Utils/AuthProvider.js","Components/Login.js","Components/Home.js","Components/Navbar.js","Components/Sidebar.js","Components/CodeEditor.js","App.js","reportWebVitals.js","index.js"],"names":["getToken","localStorage","getItem","setUserSession","token","user","name","photoURL","setItem","JSON","stringify","PrivateRoute","_ref","Component","component","isLogged","setAuth","isLoading","setAuthLoading","iDO","isDrawerOpen","rest","_objectWithoutProperties","_excluded","_jsx","Route","_objectSpread","render","props","Redirect","to","pathname","state","from","location","PublicRoute","soc","socket","Socket","app","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","getAuth","googleProvider","GoogleAuthProvider","addScope","signInWithGoogle","_asyncToGenerator","_regeneratorRuntime","mark","_callee","result","wrap","_context","prev","next","setPersistence","browserSessionPersistence","signInWithPopup","sent","t0","console","t1","getIdTokenResult","t2","log","call","abrupt","accessToken","displayName","email","photo","t3","error","stop","apply","arguments","require","config","Login","hasAuth","hasAuthLoading","_useState","useState","_useState2","_slicedToArray","loading","setLoading","_useState3","setError","useEffect","useCallback","val","_Fragment","children","className","_jsxs","type","value","onClick","then","Error","axios","post","concat","process","response","_response$data","_response$data2","_response$data3","_response$data4","data","history","push","catch","_error$response","_error$response2","_error$response3","status","_error$response4","_error$response5","_error$response6","disabled","Home","Navbar","toggleDrawer","Link","window","toLowerCase","startsWith","Sidebar","users","map","index","lineNumber","column","io","reconnection","autoConnect","transports","languageOptions","label","CodeEditor","python","javascript","cpp","code","setCode","monacoObjects","useRef","_useState4","roomName","setRoomName","_useState5","_useState6","inRoom","setInRoom","_useState7","roomCode","_useState8","availableRooms","setAvailableRooms","_useState9","_useState10","setUsers","decorationIds","useHistory","split","languageRef","_useState11","current","_useState12","language","setLanguage","tryReconnect","setTimeout","connect","connected","on","reason","description","emit","cursor","String","prevUsers","forEach","parseInt","_toConsumableArray","prevCode","_defineProperty","id","length","existingUser","find","filter","disconnect","removeAllListeners","res","err","_res$data2","_res$data3","_res$data4","_res$data5","_res$data6","defaultLanguage","activeUsers","_monacoObjects$curren","editor","monaco","deltaDecorations","decorations","createDecorations","newDecorationIds","range","Range","options","inlineClassName","stickiness","TrackedRangeStickiness","GrowsOnlyWhenTypingBefore","hoverMessage","onChange","event","target","_res$data","option","Editor","height","theme","fontSize","autoFocus","onMount","focus","onDidChangeCursorPosition","e","position","changes","forceMoveMarkers","onSubmit","preventDefault","defaultValue","room","App","authLoading","setIsDrawerOpen","removeItem","BrowserRouter","Switch","exact","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","React","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.43c90837.chunk.js","sourcesContent":["// return the user data from the session storage\r\nexport const getUser = () => {\r\n  const userStr = localStorage.getItem('name');\r\n  if (userStr) return JSON.parse(userStr);\r\n  else return null;\r\n}\r\n\r\n// return the token from the session storage\r\nexport const getToken = () => {\r\n  return localStorage.getItem('token') || null;\r\n}\r\n\r\n// remove the token and user from the session storage\r\nexport const removeUserSession = () => {\r\n  localStorage.removeItem('token');\r\n  localStorage.removeItem('username');\r\n  localStorage.removeItem('name');\r\n}\r\n\r\n// set the token and user from the session storage\r\nexport const setUserSession = (token, user, name, photoURL) => {\r\n  localStorage.setItem('token', token);\r\n  localStorage.setItem('username', JSON.stringify(user));\r\n  localStorage.setItem('name', JSON.stringify(name));\r\n  localStorage.setItem('photoURL', JSON.stringify(photoURL));\r\n}","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport { getToken } from './Common';\r\n\r\n// handle the private routes\r\nfunction PrivateRoute({ component: Component, setAuth: isLogged, setAuthLoading: isLoading, isDrawerOpen: iDO, ...rest }) {\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) => getToken() ? <Component setAuth={isLogged} setAuthLoading={isLoading} isDrawerOpen={iDO}  {...props} /> : <Redirect to={{ pathname: '/login', state: { from: props.location } }} />}\r\n    />\r\n  )\r\n}\r\n\r\nexport default PrivateRoute;","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport { getToken } from './Common';\r\n\r\n// handle the public routes\r\nfunction PublicRoute({ component: Component, setAuth: isLogged, setAuthLoading: isLoading, socket : soc,  ...rest }) {\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) => !getToken() ? <Component setAuth={isLogged} setAuthLoading={isLoading} Socket={soc} {...props} /> : <Redirect to={{ pathname: '/' }} />}\r\n    />\r\n  )\r\n}\r\n\r\nexport default PublicRoute;","import { initializeApp } from \"firebase/app\";\r\nimport {\r\n  GoogleAuthProvider,\r\n  getAuth,\r\n  signInWithPopup,\r\n  signOut,\r\n  setPersistence,\r\n  browserSessionPersistence,\r\n} from \"firebase/auth\";\r\n\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyBquhnb8FEUzjwJywfS8Ifxf6m8LVjl9ag\",\r\n    authDomain: \"codesync-ooad.firebaseapp.com\",\r\n    projectId: \"codesync-ooad\",\r\n    storageBucket: \"codesync-ooad.appspot.com\",\r\n    messagingSenderId: \"616748410621\",\r\n    appId: \"1:616748410621:web:c99f252643e7971b21c094\",\r\n    measurementId: \"G-DB2QH1HJR0\"\r\n  };\r\nconst app = initializeApp(firebaseConfig);\r\nconst auth = getAuth(app);\r\n// const db = getFirestore(app);\r\nconst googleProvider = new GoogleAuthProvider();\r\ngoogleProvider.addScope('https://www.googleapis.com/auth/userinfo.profile');\r\nconst signInWithGoogle = async () => {\r\n\r\n    try {\r\n        await setPersistence(auth, browserSessionPersistence); // set persistence to browser session\r\n        const result = await signInWithPopup(auth, googleProvider); // sign in with Google using popup\r\n        const user = result.user;\r\n        console.log(user, await user.getIdTokenResult(true));\r\n        return { auth: true, accessToken: user.accessToken, name: user.displayName, email: user.email, photo: user.photoURL}\r\n      } catch (error) {\r\n        console.error(error);\r\n        return { auth: false, accessToken: null, name: null, email: null, photo: null}\r\n      }\r\n  \r\n};\r\n\r\n\r\n\r\nconst logout = () => {\r\n  signOut(auth);\r\n};\r\nexport {\r\n  auth,\r\n  signInWithGoogle,\r\n  logout,\r\n};","import React, { useEffect, useState } from 'react';\r\nimport { useCallback } from \"react\";\r\nimport axios from 'axios';\r\nimport { setUserSession } from '../Utils/Common';\r\nimport { signInWithGoogle } from '../Utils/AuthProvider';\r\n// import logo from './.png'\r\nrequire('dotenv').config();\r\n\r\nfunction Login({setAuth: hasAuth, setAuthLoading: hasAuthLoading, Socket: socket, ...props}) {\r\n  const [loading, setLoading] = useState(false);\r\n  const [, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n  \r\n    return () => {\r\n      \r\n    }\r\n  }, [])\r\n  \r\n\r\n  const isLogged = useCallback((val) => {\r\n          hasAuthLoading(!val);\r\n          hasAuth(val);\r\n        },\r\n        [hasAuth,hasAuthLoading],\r\n      );\r\n\r\n  // handle button click of login form\r\n  const handleLogin = () => {   \r\n    setError(null);\r\n    setLoading(true);\r\n    signInWithGoogle().then((user) => {\r\n      if (!user.auth) {\r\n        throw new Error(\"Something went wrong. Please try again later.\");\r\n      }\r\n      delete user.auth;\r\n    axios.post(`${process.env.REACT_APP_HOST}/login`, user ).then(response => {\r\n      setLoading(false);\r\n      setUserSession(response.data?.accessToken, response.data?.email, response.data?.name, response.data?.photo);\r\n      isLogged(true)\r\n      props.history.push('/');\r\n    }).catch(error => {\r\n      setLoading(false);\r\n      console.log(error.response?.data)\r\n      if (error.response?.status === 401) setError(error.response?.data.error);\r\n      else setError(\"Something went wrong. Please try again later.\");\r\n    });}).catch(error => {\r\n      setLoading(false);\r\n      console.log(error.response?.data)\r\n      if (error.response?.status === 401) setError(error.response?.data.error);\r\n      else setError(\"Something went wrong. Please try again later.\");\r\n    });\r\n  }\r\n  if (loading) {\r\n// return <div className=\"loadclass\"><span className=\"loader-11\"></span></div>;\r\nreturn <>\r\n<div className=\"loadclass-new\">\r\n  <div className=\"spinner-box\">\r\n<div className=\"configure-border-1\">  \r\n  <div className=\"configure-core\"></div>\r\n</div>  \r\n<div className=\"configure-border-2\">\r\n  <div className=\"configure-core\"></div>\r\n</div> \r\n</div>\r\n</div>\r\n</>;  }\r\n\r\n  return (\r\n    <div>\r\n\r\n\r\n        <h3 className='brand-titl'>CodeSync</h3>\r\n\r\n        {/* <div id=\"firebaseui\"></div> */}\r\n        <input type=\"button\" value={loading ? 'Loading...' : 'LOGIN'} onClick={handleLogin} disabled={loading} />\r\n        \r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;","import React from 'react'\r\n\r\nfunction Home() {\r\n  return (\r\n    <div>Home</div>\r\n  )\r\n}\r\n\r\nexport default Home","import React from 'react';\r\nimport '../Styles/main.css';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction Navbar({toggleDrawer, auth , setAuth , ...props}) {\r\n  return (<>\r\n  { auth &&\r\n    <nav className=\"navbar\">\r\n      <div className=\"logo\">My App</div>\r\n      <ul className=\"nav-links\">\r\n        <li><Link to=\"/\">Home</Link></li>\r\n        <li><Link to=\"/\">About</Link></li>\r\n        <li><Link to=\"/editor\">Editor</Link></li>\r\n      {window.location.pathname.toLowerCase().startsWith('/editor') && <div className=\"menu-toggle\" onClick={toggleDrawer}>\r\n      <i className=\"fa-solid fa-users-line\"></i>\r\n      </div>}\r\n      </ul>\r\n    </nav>\r\n}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Navbar;","import React from 'react';\r\nimport '../Styles/main.css';\r\n\r\nfunction Sidebar({isDrawerOpen, users, ...props}) {\r\n  return (\r\n    <div className={`drawer ${ isDrawerOpen? \"open\" : \"\"}`}>\r\n      <h2>Active Users</h2>\r\n      <ul>\r\n        {users.map((user, index) => {\r\n          return <li key={index}>{user.email} - {user.lineNumber}:{user.column}</li>\r\n        })}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Sidebar;","import { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport Editor from \"@monaco-editor/react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { getToken } from \"../Utils/Common\";\r\nimport io from \"socket.io-client\";\r\nimport Sidebar from \"./Sidebar\";\r\n\r\n// add type annotations to the socket object\r\nconst socket = io(`${process.env.REACT_APP_SOCKET}/?token=${getToken()}`, {\r\n  reconnection: true,\r\n  autoConnect: false,\r\n  transports: [\"websocket\"],\r\n});\r\nconst languageOptions = [\r\n  { label: \"JavaScript\", value: \"javascript\" },\r\n  { label: \"Python\", value: \"python\" },\r\n  { label: \"C++\", value: \"cpp\" },\r\n];\r\n// const codeOpts = {\r\n//   javascript:\r\n//     \"function newFunc(){\\n  for (let i=0;i<l.length;i++){\\n    console.log(m);\\n  }\\n  if (n==4){\\n    console.log('hi');\\n  }\\n  else{\\n    console.log('bye');\\n  }\\n}\",\r\n//   python:\r\n//     \"def newFunc():\\n  for i in range(l):\\n    print(m)\\n  if n==4:\\n    print('hi')\\n  else:\\n    print('bye')\",\r\n//   cpp: \"#include <iostream>\\nusing namespace std;\\nint main(){\\n  for (int i=0;i<l.length();i++){\\n    cout<<m;\\n  }\\n  if (n==4){\\n    cout<<'hi';\\n  }\\n  else{\\n    cout<<'bye';\\n  }\\n  return 0;\\n}\",\r\n// };\r\nfunction CodeEditor({ isDrawerOpen, ...props }) {\r\n  const [code, setCode] = useState({python:\"\", javascript:\"\", cpp:\"\"});\r\n  const monacoObjects = useRef(null);\r\n  const [roomName, setRoomName] = useState(\"\");\r\n  const [inRoom, setInRoom] = useState(false);\r\n  const [availableRooms, setAvailableRooms] = useState([\r\n    { roomCode: \"123456\", roomName: \"test\" },\r\n  ]);\r\n  const [users, setUsers] = useState([]);\r\n  // console.log(props)\r\n  // const [isReconnecting, setIsReconnecting] = useState(false);\r\n\r\n  const decorationIds = useRef([]);\r\n\r\n  let history = useHistory();\r\n  let roomCode = history.location.pathname.split(\"/\")[2];\r\n\r\n  const languageRef = useRef(null);\r\n  const [language, setLanguage] = useState(languageRef.current);\r\n\r\n  const handleLanguageChange = (event) => {\r\n    languageRef.current = event.target.value;\r\n    setLanguage(event.target.value);\r\n    axios\r\n      .post(`${process.env.REACT_APP_HOST}/room/changeLanguage`, {\r\n        token: getToken(),\r\n        roomCode: roomCode,\r\n        language: event.target.value,\r\n      })\r\n      .then((res) => {\r\n        // console.log(res);\r\n        setCode(() => {\r\n          return {\r\n            ...code,\r\n            [languageRef.current]: res.data.code,\r\n          };\r\n        });\r\n        setUsers(res?.data?.activeUsers);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n    // console.log(language.current,event.target.value);\r\n  };\r\n\r\n  const tryReconnect = useCallback(() => {\r\n    setTimeout(() => {\r\n      socket.connect();\r\n      // if (socket.connected){\r\n      // }\r\n    }, 2000);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    // console.log(roomCode, inRoom);\r\n    if (!roomCode || !inRoom) {\r\n      return;\r\n    }\r\n    // console.log(1)\r\n    if (!socket.connected) {\r\n      tryReconnect();\r\n    }\r\n    // console.log(2)\r\n\r\n    socket.io.on(\"close\", (reason, description) => {\r\n      console.log(\"socket closed\");\r\n      if (reason === \"transport close\") tryReconnect();\r\n    });\r\n\r\n    socket?.on(\"authConnect\", () => {\r\n      // console.log(\"socket connected\");\r\n      socket.emit(\"joinRoom\", { token: getToken(), roomCode: roomCode });\r\n    });\r\n\r\n    socket?.on(\"cursorUpdate\", (data) => {\r\n      const { cursor, email, language } = data;\r\n      const lineNumber = String(cursor).split(\":\")[0];\r\n      const column = String(cursor).split(\":\")[1];\r\n      // console.log(existingUserIndex);\r\n      if (language !== languageRef.current) {\r\n        return;\r\n      }\r\n      setUsers((prevUsers) => {\r\n        prevUsers.forEach((user) => {\r\n          if (user.email === email) {\r\n            user.lineNumber = parseInt(lineNumber);\r\n            user.column = parseInt(column);\r\n          }\r\n          // console.log(user);\r\n        });\r\n        // console.log(prevUsers);\r\n        return [...prevUsers];\r\n      });\r\n      \r\n    });\r\n\r\n    socket?.on(\"codeUpdate\", (data) => {\r\n      const { code, language } = data;\r\n      if (language !== languageRef.current) {\r\n        return;\r\n      }\r\n      setCode((prevCode) => {\r\n        return {\r\n          ...prevCode,\r\n          [languageRef.current]: code,\r\n        };\r\n      });\r\n    });\r\n\r\n    socket?.on(\"activeUsersUpdate\", (data) => {\r\n      const { email, name, lineNumber, column, type } = data;\r\n      setUsers((prevUsers) => {\r\n        let id = prevUsers.length ? parseInt(prevUsers[prevUsers.length - 1].id) + 1 : 1;\r\n        let existingUser = prevUsers.find((user) => user.email === email);\r\n        // console.log(existingUser, type);\r\n        if (existingUser && type === \"leave\") {\r\n          return prevUsers\r\n            .filter((user) => user.email !== email)\r\n            .map((user, index) => {\r\n              // console.log({\r\n              //   ...user,\r\n              //   id: index + 1,\r\n              // })\r\n              return {\r\n                ...user,\r\n                id: index + 1,\r\n              };\r\n            });\r\n        } else if (existingUser && type === \"join\") {\r\n          return prevUsers.map((user) => {\r\n            if (user.email === email) {\r\n              return {\r\n                ...user,\r\n                email,\r\n                name,\r\n                lineNumber,\r\n                column,\r\n                id: user.id,\r\n              };\r\n            } else {\r\n              return user;\r\n            }\r\n          });\r\n        } else if (!existingUser && type === \"join\") {\r\n          return [\r\n            ...prevUsers,\r\n            {\r\n              email,\r\n              name,\r\n              lineNumber,\r\n              column,\r\n              id: id,\r\n            },\r\n          ];\r\n        } else {\r\n          // console.log(prevUsers);\r\n          return prevUsers;\r\n        }\r\n      });\r\n      // console.log(users)\r\n    });\r\n\r\n    // disconnect the socket when the component is unmounted\r\n    return () => {\r\n      // console.log(\"unmounting\");\r\n      socket.disconnect({ token: getToken() });\r\n      socket.removeAllListeners();\r\n      socket.io.removeAllListeners();\r\n    };\r\n  }, [inRoom, roomCode, tryReconnect]);\r\n\r\n  useEffect(() => {\r\n    if (roomCode?.length !== 6) {\r\n      // console.log(history.location.pathname)\r\n      if (history.location.pathname === `/editor`) {\r\n        axios\r\n          .post(`${process.env.REACT_APP_HOST}/room/getDetails`, {\r\n            token: getToken(),\r\n          })\r\n          .then((res) => {\r\n            // console.log(res.data);\r\n            setAvailableRooms(res.data);\r\n          })\r\n          .catch((err) => {\r\n            console.log(err);\r\n          });\r\n      }\r\n      history.push(\"/editor\");\r\n      return;\r\n    }\r\n    axios\r\n      .post(`${process.env.REACT_APP_HOST}/room/join`, {\r\n        token: getToken(),\r\n        roomCode: roomCode,\r\n      })\r\n      .then((res) => {\r\n        // console.log(res?.data.activeUsers);\r\n        setInRoom(true);\r\n        setRoomName(res?.data?.roomName);\r\n        setLanguage(res?.data?.defaultLanguage);\r\n        languageRef.current = res?.data?.defaultLanguage;\r\n        // console.log(res?.data?.activeUsers);\r\n        setCode(res?.data?.data);\r\n        setUsers(res?.data?.activeUsers);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        history.push(\"/editor\");\r\n      });\r\n    return () => {};\r\n  }, [history, roomCode]);\r\n\r\n  const createRoom = (e) => {\r\n    e.preventDefault();\r\n    // console.log(e.target.language.value, e.target.roomName.value);\r\n    // return;\r\n\r\n    axios\r\n      .post(`${process.env.REACT_APP_HOST}/room/create`, {\r\n        token: getToken(),\r\n        roomName: e.target.roomName.value,\r\n        defaultLanguage: e.target.language.value,\r\n      })\r\n      .then((res) => {\r\n        // console.log(res);\r\n        history.push(`/editor/${res.data.roomCode}`);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n  // create a array of 10 colors with opacity 0.7\r\n  useEffect(() => {\r\n    if (!monacoObjects.current) return;\r\n\r\n    const { editor, monaco } = monacoObjects.current;\r\n\r\n    // remove all decorations\r\n    editor.deltaDecorations(decorationIds.current, []);\r\n\r\n    // create text decorations  based on user position\r\n    const decorations = createDecorations(editor, monaco, users);\r\n\r\n    // Set the decorations\r\n    const newDecorationIds = editor.deltaDecorations([], decorations);\r\n    decorationIds.current = newDecorationIds;\r\n    // console.log(decorations);\r\n    // editor.deltaDecorations(decorationIds.current, []);\r\n  }, [users]);\r\n\r\n  const createDecorations = (\r\n    editor,\r\n    /** @type {import(\"@monaco-editor/react\").Monaco} */ monaco,\r\n    users\r\n  ) => {\r\n    const decorations = users.map((user, index) => {\r\n      // console.log(user);\r\n      return {\r\n        range: new monaco.Range(\r\n          // 3, 2, 3, 3\r\n          user.lineNumber,\r\n          user.column,\r\n          user.lineNumber,\r\n          parseInt(user.column) + 1\r\n        ),\r\n        options: {\r\n          inlineClassName: `color-${user.id}`,\r\n          stickiness:\r\n            monaco.editor.TrackedRangeStickiness.GrowsOnlyWhenTypingBefore,\r\n          hoverMessage: { value: `User: ${user.name}` },\r\n        },\r\n      };\r\n    });\r\n    return decorations;\r\n  };\r\n\r\n  const handleEditorDidMount = (editor, monaco) => {\r\n    monacoObjects.current = {\r\n      editor,\r\n      monaco,\r\n    };\r\n    editor.focus();\r\n    editor.onDidChangeCursorPosition((e) => {\r\n      // console.log(e);\r\n      socket.emit(\"cursorUpdate\", {\r\n        roomCode: roomCode,\r\n        cursor: `${e.position.lineNumber}:${e.position.column}`,\r\n        language: languageRef.current,\r\n      });\r\n    });\r\n    // editor.onMouseMove(function (e) {\r\n    //   // remove all existing decorations\r\n    //   // monacoObjects.current.editor.deltaDecorations(monacoObjects.current.editor.getModel().getAllDecorations(), []);\r\n    //   console.log(e);\r\n    //   editor.deltaDecorations(decorationIds.current, []);\r\n    // });\r\n\r\n    // setUsers([\r\n    //   { id: 1, name: \"User 1\", lineNumber: 1, column: 5, color: \"red\" },\r\n    //   { id: 2, name: \"User 2\", lineNumber: 2, column: 4, color: \"blue\" },\r\n    //   { id: 3, name: \"User 3\", lineNumber: 3, column: 4, color: \"green\" },\r\n    //   { id: 4, name: \"User 4\", lineNumber: 4, column: 4, color: \"yellow\" },\r\n    //   { id: 5, name: \"User 5\", lineNumber: 5, column: 4, color: \"orange\" },\r\n    // ]);\r\n  };\r\n\r\n  const handleEditorChange = (value, event) => {\r\n    // console.log(languageRef.current,value)\r\n    // console.log(event);\r\n    if (event.changes[0].forceMoveMarkers) return;\r\n    socket.emit(\"codeUpdate\", {\r\n      roomCode: roomCode,\r\n      language: languageRef.current,\r\n      code: value,\r\n    });\r\n    setCode(() => {\r\n      return {\r\n        ...code,\r\n        [languageRef.current]: value,\r\n      };\r\n    });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Sidebar isDrawerOpen={isDrawerOpen} users={users} />\r\n      <div className=\"editor\">\r\n        {inRoom ? (\r\n          <>\r\n            <h2>\r\n              Code Editor <small aria-haspopup={\"tree\"}>({roomName})</small>\r\n            </h2>\r\n            <div className=\"language-dropdown\">\r\n              <select\r\n                value={language ? language : \"\"}\r\n                onChange={handleLanguageChange}\r\n              >\r\n                {languageOptions.map((option) => (\r\n                  <option key={option.value} value={option.value}>\r\n                    {option.label}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n            <Editor\r\n              height=\"75vh\"\r\n              theme=\"vs-dark\"\r\n              language={languageRef.current}\r\n              value={code[languageRef.current]}\r\n              options={{\r\n                fontSize: 20,\r\n                autoFocus: true,\r\n              }}\r\n              onMount={handleEditorDidMount}\r\n              onChange={handleEditorChange}\r\n            />\r\n          </>\r\n        ) : (\r\n          <>\r\n            <div>\r\n              <form onSubmit={createRoom}>\r\n                <label>\r\n                  Room Name:\r\n                  <input type=\"text\" id=\"roomName\" />\r\n                </label>\r\n                <br />\r\n                <label>\r\n                  Default language:\r\n                  <select defaultValue={languageOptions[0]} id=\"language\">\r\n                    {languageOptions.map((option) => (\r\n                      <option key={option.value} value={option.value}>\r\n                        {option.label}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </label>\r\n                <button type=\"submit\">Submit</button>\r\n              </form>\r\n              <h1>Create Room</h1>\r\n            </div>\r\n            <br />\r\n            <div>\r\n              <h1>Join Room</h1>\r\n              {availableRooms.map((room, index) => {\r\n                return (\r\n                  <h5\r\n                    key={index}\r\n                    onClick={() => history.push(`/editor/${room.roomCode}`)}\r\n                  >\r\n                    {room.roomName}\r\n                  </h5>\r\n                );\r\n              })}\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default CodeEditor;\r\n","\r\n// eslint-disable-next-line\r\nimport { BrowserRouter, Switch, Route } from \"react-router-dom\";\r\nimport  { useEffect, useState} from \"react\";\r\n// import axios from \"axios\";\r\n\r\nimport PrivateRoute from \"./Utils/PrivateRoute\";\r\nimport PublicRoute from \"./Utils/PublicRoute\";\r\n// import { getToken, removeUserSession, setUserSession } from \"./Utils/Common\";\r\nimport Login from \"./Components/Login\";\r\nimport Home from \"./Components/Home\";\r\nimport Navbar from \"./Components/Navbar\";\r\nimport CodeEditor from \"./Components/CodeEditor\";\r\nimport \"./App.css\";\r\nimport { getToken, removeUserSession, setUserSession } from \"./Utils/Common\";\r\nimport axios from \"axios\";\r\n\r\nfunction App() {\r\n  const [authLoading, setAuthLoading] = useState(true);\r\n  const [auth, setAuth] = useState(false);\r\n  const [isDrawerOpen, setIsDrawerOpen] = useState(true);\r\n\r\n  const toggleDrawer = () => {\r\n    // console.log(!isDrawerOpen)\r\n    setIsDrawerOpen(!isDrawerOpen);\r\n  };\r\n  \r\n  useEffect(() => {\r\n    const token = getToken();\r\n    if (!token) {\r\n      return;\r\n    }\r\n\r\n    axios\r\n      .post(`${process.env.REACT_APP_HOST}/verifyToken`,{ token:token })\r\n      .then((response) => {\r\n        setUserSession(token, response.data?.email, response.data?.name, response.data?.photo);\r\n        setAuthLoading(false);\r\n        setAuth(true);\r\n        // socket.emit(\"test\",\"hi\");\r\n        // setTimeout(()=>{socket.emit(\"test\",\"1\");setTimeout(()=>{socket.emit(\"test\",\"2\");setTimeout(()=>{socket.emit(\"test\",\"3\");setTimeout(()=>{socket.emit(\"test\",\"4\");setTimeout(()=>{socket.emit(\"test\",\"5\");},500);},500);},500);},500);},500);\r\n      })\r\n      .catch((error) => {\r\n        if (error?.response?.status === 401 ) removeUserSession();\r\n        setAuthLoading(false);\r\n        setAuth(false);\r\n      });\r\n      return () => {\r\n        // socket.disconnect({token: getToken()});\r\n      }\r\n  }, []);\r\n\r\n  if (authLoading && getToken()) {\r\n// return <div className=\"loadclass\"><span className=\"loader-11\"></span></div>;\r\nreturn <>\r\n<div className=\"loadclass-new\">\r\n  <div className=\"spinner-box\">\r\n<div className=\"configure-border-1\">  \r\n  <div className=\"configure-core\"></div>\r\n</div>  \r\n<div className=\"configure-border-2\">\r\n  <div className=\"configure-core\"></div>\r\n</div> \r\n</div>\r\n</div>\r\n</>;  }\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <BrowserRouter >\r\n        <div>\r\n          <Navbar  \r\n          auth={auth} \r\n          setAuth={setAuth}\r\n          setAuthLoading={setAuthLoading}\r\n          toggleDrawer={toggleDrawer}\r\n          //  soc={socket}\r\n           />\r\n          \r\n          <div className=\"content\">\r\n            <Switch>\r\n              <PrivateRoute\r\n                exact path=\"/\"\r\n                component={Home}\r\n                setAuth={setAuth}\r\n                setAuthLoading={setAuthLoading}\r\n                // socket={socket}\r\n              />\r\n         \r\n              <PublicRoute\r\n                exact path=\"/\"\r\n                component={Login}\r\n              />\r\n              <PublicRoute\r\n                path=\"/login\"\r\n                component={Login}\r\n                setAuth={setAuth}\r\n                setAuthLoading={setAuthLoading}\r\n                // socket={socket}\r\n              />\r\n\r\n              <PrivateRoute\r\n                path=\"/editor\"\r\n                component={CodeEditor}\r\n                setAuth={setAuth}\r\n                setAuthLoading={setAuthLoading}\r\n                isDrawerOpen={isDrawerOpen}\r\n                // socket={socket}\r\n              />\r\n              \r\n              {/* <PrivateRoute\r\n                path=\"/admin\"\r\n                component={Admin}\r\n                setAuth={setAuth}\r\n                setAuthLoading={setAuthLoading}\r\n                // socket={socket}\r\n              /> */}\r\n\r\n            </Switch>\r\n          </div>\r\n        </div>\r\n      </BrowserRouter>     \r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}